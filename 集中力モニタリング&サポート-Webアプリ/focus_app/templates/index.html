<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <title>集中力モニタリング</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css')}}">
</head>

<body class="bg-blue-soft">
  <div class="container mt-4">

    <div class="card shadow rounded-4 p-4 mx-auto main-card">

      <h2 class="text-center mb-3 text-orange fw-bold">
        集中力モニタリング
      </h2>

      <!-- 植物/動物の成長表示 -->
      <div id="growth-area" class="text-center mb-3"></div>

      <!-- 集中履歴へのリンク -->
      <div class="text-end mb-2">
        <button id="btn-history" class="btn btn-outline-warning rounded-pill btn-sm">集中履歴を見る</button>
      </div>

      <!-- メイン画面 -->
      <div id="main-screen">
        <p class="VideoSize"><video id="camera" autoplay playsinline class="rounded-3 border border-blue mb-3 w-80"></video></p>
        <div class="text-center mb-2">
          <button id="camera-toggle" class="btn btn-warning btn-sm rounded-pill">
            カメラON/OFF
          </button>
        </div>
        <div id="focus-status" class="alert alert-info text-center mb-3">
            集中判定待ち...
        </div>
        <div id="focus-timer" class="mb-2 text-center small text-secondary"></div>
        <div id="break-or-game" class="d-none text-center mb-2">
          <div class="mb-2 fw-bold">集中が切れました。どうしますか？</div>
          <button id="btn-game" class="btn btn-orange me-2 rounded-pill">神経衰弱ゲーム</button>
          <button id="btn-break" class="btn btn-blue rounded-pill">一休みする</button>
        </div>
        <!-- test button -->
        <!--
        <div class="text-center mb-2">
          <button id="manual-game" class="btn btn-outline-orange rounded-pill me-2">神経衰弱テスト</button>
          <button id="manual-break" class="btn btn-outline-blue rounded-pill">休憩タイマーテスト</button>
        </div>
        -->
      </div>

      <!-- 神経衰弱ゲーム画面 -->
      <div id="memory-game-screen" class="d-none">
        <div id="memory-game"></div>
        <button id="back-main-from-game" class="btn btn-blue rounded-pill mt-3">メイン画面へ戻る</button>
      </div>

      <!-- 休憩タイマー画面 -->
      <div id="break-timer-screen" class="d-none">
        <div class="mb-3">
          <label for="break-hour" class="form-label">休憩時間:</label>
          <input type="number" id="break-hour" min="0" max="5" value="0" class="form-control d-inline w-auto">時
          <input type="number" id="break-min" min="0" max="59" value="1" class="form-control d-inline w-auto">分
          <input type="number" id="break-sec" min="0" max="59" value="0" class="form-control d-inline w-auto">秒
        </div>
        <button id="start-break-timer" class="btn btn-blue rounded-pill mb-3">休憩スタート</button>
        <div id="break-timer"></div>
        <button id="back-main-from-break" class="btn btn-orange rounded-pill mt-3">メイン画面へ戻る</button>
      </div>

      <!-- 集中履歴画面 -->
      <div id="history-screen" class="d-none">
        <h4 class="text-yellow mb-3">集中履歴</h4>
        <div id="history-list"></div>
        <button id="back-main-from-history" class="btn btn-blue rounded-pill mt-3">メイン画面へ戻る</button>
      </div>
      
    </div>
  </div>
  <script src="{{ url_for('static', filename='javascript/main.js')}}"></script>
</body>
</html>